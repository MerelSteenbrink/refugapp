
<div class="banner posts" style="background-image: linear-gradient(-225deg, rgba(0,101,168,0.6) 0%, rgba(0,36,61,0.6) 50%), ;">
  <div class="wrapper">
    <div class="banner-content">
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <h1>POSTS</h1>
      <p><%= link_to 'Make a post!', new_post_path, class:"btn btn-danger btn-lg" %></p>
      <div class="card-wrapper">
        <div class="container">
          <div class="row">
            <% @posties.each do |post| %>
            <div class="col-xs-12 col-sm-6">
              <div class= "card">
                <div class="card-title"><h2><%= link_to post.subject, post_path(post) %></h2> </div>
                <p><%= post.updated_at.strftime("%d-%m-%Y %H:%M:%S") %></p>
                <p><%= link_to post.author.title, user_path(post.author) %></p>

                <div class="card-description">
                  <p><%= post.content %></p>
                  <% if current_user && current_user != post.author %>
                  <p><%= link_to "Write a request to this Post", new_post_request_path(post), class: "make btn btn-success" %></p>
                  <% end %>
                </div>
              </div>
            </div>

            <% end %>
          </div>
        </div>
      </div>
      <p><%= link_to 'Make a post!', new_post_path, class:"btn btn-danger btn-lg" %></p>
    </div>
  </div>
</div>

<div id="map" style="width: 100%; height: 600px;"></div>


<!-- This is the code for the map -->
<% content_for(:after_js) do %>
<%= javascript_tag do %>
$(document).on('ready', function() {
handler = Gmaps.build('Google');
handler.buildMap({ internal: { id: 'map' } }, function(){
markers = handler.addMarkers(<%= raw @markers.to_json %>);
handler.bounds.extendWith(markers);
handler.fitMapToBounds();
});
})
<% end %>
<% end %>



